Forth Structures
================

Allocator Free List
-------------------

```
        0 +-----------------+
          |      Length     |
        8 +-----------------+
          |    Next Link    |
       16 +-----------------+
          |                 |
         ... Usable Memory ...
          |                 |
16+Length +-----------------+
          |  Rsvd  |  Flags |
24+Length +-----------------+
          |      Length     |
32+Length +-----------------+
```

The `Next Link` is `0` at the end of the list.

The flags are:

```
MSB                             LSB
00000000 00000000 00000000 0000000F
```

|   | Name     | Description          |
|---|----------|----------------------|
| 0 | Reserved | Should be 0          |
| F | Free     | 0 = free, 1 = in use |

User Area
---------

```
   0 +--------------------+--------------------+--------------------+--------------------+
     |   Head of Mailbox  |   Tail of Mailbox  |   Start of Source  |  Length of Source  |
  32 +--------------------+--------------------+--------------------+--------------------+
     |     Input Offset   |        Flags       |   Output Process   |                    |
  64 +--------------------+--------------------+--------------------+                    |
    ...                                    Reserved                                     ...
 224 +--------------------+--------------------+--------------------+--------------------+
     |     Stored RBX     |     Stored RSI     |     Stored RSP     |     Stored RBP     |
 256 +--------------------+--------------------+--------------------+--------------------+
     |                                                                                   |
     |                                    Return Stack                                   |
     |                                     (32 words)                                    |
     |                                                                                   |
 512 +--------------------+--------------------+--------------------+--------------------+
     |                                                                                   |
     |                                                                                   |
     |                                                                                   |
     |                                  Parameter Stack                                  |
     |                                     (64 words)                                    |
     |                                                                                   |
     |                                                                                   |
     |                                                                                   |
1024 +--------------------+--------------------+--------------------+--------------------+
```

The flags are:

```
MSB                                                                 LSB
00000000 00000000 00000000 00000000 00000000 00000000 00000000 000000SB
```

|   | Name     | Description                |
|---|----------|----------------------------|
| 0 | Reserved | Should be 0                |
| B | Base     | 0 = decimal, 1 = hex       |
| S | State    | 0 = interpret, 1 = compile |

Words
-----

```
     0 +-------------------------------+  ---+
       |           Next Link           |     |
     8 +-------+-------+---------------+     +-- Header
       | Flags |  Len  |     Name     ...    |
10+Len +-------+-------+---------------+  ---+
       |              CFA             ...
       +-------------------------------+
       |              PFA             ...
       +-------------------------------+
```

The flags are:

```
MSB  LSB
000000SI
```

|   | Name      | Description               |
|---|-----------|---------------------------|
| 0 | Reserved  | Should be 0               |
| I | Immediate | 0 = normal, 1 = immediate |
| S | Smudge    | 0 = visible, 1 = hidden   |
